<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Alfabeto - Signealo</title>
        <link rel="stylesheet" href="../../style.css" />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
        />
    </head>
    <body>
        <header class="page-header">
            <a href="../../caracteristicas.html" class="back-btn"
                ><i class="bi bi-arrow-left"></i
            ></a>
            <h1>Abecedario</h1>
        </header>

        <main class="container" style="margin-top: 20px">
            <!-- Visor -->
            <div class="viewer-box" id="viewer">
                <div style="text-align: center; color: var(--text-light)">
                    <i
                        class="bi bi-hand-index-thumb"
                        style="
                            font-size: 3rem;
                            display: block;
                            margin-bottom: 10px;
                        "
                    ></i>
                    <p>Selecciona una letra</p>
                </div>
            </div>

            <!-- Teclado -->
            <div class="keyboard-grid" id="keyboard"></div>
        </main>

        <script>
            const letters = "ABCDEFGHIJKLMNÃ‘OPQRSTUVWXYZ".split("");
            const board = document.getElementById("keyboard");
            const viewer = document.getElementById("viewer");
            const assetsPath = "../../assets/";

            // Crear teclado
            letters.forEach((char) => {
                const btn = document.createElement("button");
                btn.className = "key-btn";
                btn.textContent = char;
                btn.onclick = () => loadSign(char, btn);
                board.appendChild(btn);
            });

            function loadSign(char, btn) {
                // Resetear estilos activos
                document
                    .querySelectorAll(".key-btn")
                    .forEach((b) => b.classList.remove("active"));
                btn.classList.add("active");

                // Intentar cargar imagen (PNG -> JPG -> Texto)
                const img = new Image();
                img.src = `${assetsPath}${char}.png`;

                img.onload = () => {
                    viewer.innerHTML = "";
                    viewer.appendChild(img);
                };

                img.onerror = () => {
                    // Si falla PNG, probamos JPG
                    const imgJpg = new Image();
                    imgJpg.src = `${assetsPath}${char}.jpg`;
                    imgJpg.onload = () => {
                        viewer.innerHTML = "";
                        viewer.appendChild(imgJpg);
                    };
                    imgJpg.onerror = () => {
                        // Si falla todo, mostramos la letra grande
                        viewer.innerHTML = `<h1 style="font-size: 8rem; color: #e5e7eb; margin: 0;">${char}</h1>`;
                    };
                };
            }
        </script>
    </body>
</html>
